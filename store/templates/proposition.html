{% extends 'base.html' %}

{% block content %}
{% load cart %}
{% load custom_filter %}

<style>
  a {
    @apply no-underline text-black; /* Equivalent to text-decoration: none and color: #000000dd; */
  }

  .total-div {
    @apply ml-8 mr-8 flex justify-between; /* Equivalent to margin-left: 50px, margin-right: 50px, display: flex, and justify-content: space-between; */
  }

  .trash-icon {
    @apply border-none pl-8 overflow-visible bg-transparent; /* Equivalent to border: none, padding-left: 50px, overflow: visible, and background-color: transparent; */
    background-image: url('https://cdn.discordapp.com/attachments/718214061283737712/1150786472287416370/icons8-trash-64.png');
    background-size: 100%;
  }

  .buy-btn {
    @apply text-lg text-black py-1 px-5 border-2 border-solid border-blue-600 rounded-full mx-auto no-underline; /* Equivalent to font-size: large, color: #000000dd, padding: 5px 20px, border: #004D95 solid 2px, border-radius: 10px, margin: auto, and text-decoration: none; */
  }

  .buy-btn:hover {
    @apply bg-blue-600 text-white; /* Equivalent to background-color: #004D95 and color: white; */
  }
</style>

<div class="sm:w-full sm:mx-4 md:w-6/12 md:mx-auto">
  <div class="flex justify-center">
      <div class="w-full">

        <h2 class="text-2xl mb-2">Vos propostions</h2>
        {% if offers|length == 0 %}
          <div class="alert alert-info" role="alert">
            Vous n'avez aucune proposition active pour le moment.
          </div>
        {% else %}
          {% for offer in offers %}
          <div class="card rounded-3 mb-2" style="height: 25vh;">
            <div class="card-body p-2">
              <div class="flex justify-between items-center" style="height: 100%; padding-left: 0.5rem;">
                <div class="flex-none w-1/6">
                  <img src="{{ offer.product.id|get_first_image_product }}" alt="{{ offer.product.name }}" class="h-23vh w-auto">
                </div>
                <div class="flex-grow md:w-1/2 lg:w-3/5">
                  <p class="font-semibold mb-2"><a href="/product/{{ offer.product.id }}">{{ offer.product.name }}</a></p>
                  <p><span class="text-gray-500"><a href="/product/{{ offer.product.id }}">{{ offer.product.category }}</a></p>
                </div>
                <div class="flex-none w-1/4">
                  <h5 class="mb-0">Minimum: {{ offer.product.price|min_price|currency }}</h5>
                </div>
                <div class="flex-none w-1/4">
                  <h5 class="mb-0">Offre: {{ offer.price|currency }}</h5>
                </div>
                <form action="/cart" method="POST" class="flex-none w-1/12">
                  {% csrf_token %}
                  <input hidden type="text" name="offer" value="{{ offer.id }}">
                  <input type="submit" class="trash-icon" value="" style="height: 50px;">
                </form>
              </div>
            </div>
          </div>
          {% endfor %}
        {% endif %}  
    </div>
  </div>
</div>

{% endblock %}
